<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ö‡•á‡§§‡§®‡§æ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä | Citizen Awareness & Responsibility</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
/* Shared container for consistent width and centering */
.container{
  max-width:1100px;
  margin:0 auto;
  width:100%;
}
*{box-sizing:border-box;font-family:Arial,sans-serif}
:root{
  --primary:#0b3c5d;     /* Government deep blue */
  --secondary:#1d4ed8;   /* Blue accent */
  --accent:#f97316;      /* Saffron (CTA / highlights) */
  --bg:#f8fafc;          /* Clean light background */
  --card:#ffffff;
}

body{
  margin:0;
  background:var(--bg);
  font-family:system-ui,Segoe UI,Arial,sans-serif;
  color:#111827;
}
header{
  background:var(--primary);
  color:#ffffff;
  padding:18px 28px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:1000;
}

nav button{
  margin-left:12px;
  padding:10px 18px;
  border:none;
  cursor:pointer;
  background:#e0e7ff;
  color:#0b3c5d;
  border-radius:8px;
  font-weight:700;
}

nav button:hover{
  background:#bbf7d0;
}
.lang-btn{
  background:#ffffff !important;
  color:var(--gov-blue) !important;
  font-weight:bold;
  border-radius:20px;
}
.lang-btn:hover{
  background:#f1f1f1 !important;
}
.logo h2{margin:0}
.logo span{font-size:13px;opacity:.8}
.section{
  display:none;
  padding:50px 20px;
  min-height:calc(100vh - 90px);
  background:var(--bg);
}

@keyframes slideFade{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

.section.active{display:block}
.primary{
  padding:12px 28px;
  background:var(--accent);
  color:#ffffff;
  border:none;
  border-radius:8px;
  font-weight:800;
  cursor:pointer;
}

.primary:hover{
  background:#16a34a;
}
form{max-width:500px;margin:auto;text-align:left}
label{margin-top:10px;display:block;font-weight:bold}
input,textarea,select{
  width:100%;
  padding:12px 14px;
  border-radius:8px;
  border:2px solid #86efac;
  font-size:14px;
  background:#ffffff;
  color:#111827;
}
footer{
  background:var(--primary);
  color:#ffffff;
  text-align:center;
  padding:12px;
  margin-top:40px;
}
#trackResult{margin-top:20px;font-weight:bold}
/* Card style can be kept simple, but left as is for now */
img{cursor:pointer}

/* Added government-style CSS for home page */
.home-hero{
  background:#ffffff;
  color:#000000;
  display:flex;
  justify-content:center;
  padding-top:40px;
}

.hero-content{
  background:#ffffff;
  border-radius:10px;
  padding:30px;
  border:1px solid #e5e7eb;
}

.hero-content h1{
  font-size: 42px;
  margin-bottom: 10px;
  letter-spacing: 1px;
}

.tagline{
  font-size: 16px;
  opacity: 0.9;
  margin-bottom: 30px;
}

.hero-actions{
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.secondary{
  padding:12px 25px;
  background:rgba(255,255,255,0.15);
  color:#ffffff;
  border:2px solid rgba(255,255,255,0.6);
  border-radius:6px;
  cursor:pointer;
}

.secondary:hover{
  background: rgba(255,255,255,0.1);
}

.gov-note{
  font-size: 14px;
  opacity: 0.85;
  max-width: 600px;
  margin: auto;
  line-height: 1.6;
}
form{
  background:var(--card);
  padding:25px;
  border-radius:10px;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
}
input,textarea,select{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
  transition:all .2s ease;
}
input:focus,textarea:focus,select:focus{
  outline:none;
  border-color:#16a34a;
  background:#ecfdf5;
}
</style>
<!-- Add styles for new home sections -->
<style>
.notice-board, .rules-box{
  background:#ffffff;
  border-radius:12px;
  padding:24px;
  margin-top:26px;
  border:1px solid #c7d2fe;
}
</style>
<style>
p, li, label{
  color:#000000;
  line-height:1.8;
}
table{
  width:100%;
  border-collapse:collapse;
}
table th, table td{
  padding:10px;
  border:1px solid #e5e7eb;
  color:#000000;
}
table th{
  background:#f1f5f9;
}
</style>
<!-- ===============================
     RESPONSIVE DESIGN (MOBILE + DESKTOP)
     =============================== -->
<style>
@media (max-width: 1024px){
  .container{
    padding: 0 15px;
  }
}

@media (max-width: 768px){
  /* Header */
  header{
    flex-direction: column;
    text-align: center;
    gap: 6px;
  }

  /* Navbar */
  nav{
    flex-wrap: wrap;
    gap: 8px;
  }

  nav button{
    flex: 1 1 45%;
    margin: 0;
  }

  /* Hero */
  .hero-content h1{
    font-size: 28px;
  }

  .hero-actions{
    flex-direction: column;
  }

  /* Main grid ‚Üí stack */
  #mainContent .container{
    grid-template-columns: 1fr !important;
  }

  aside{
    order: 2;
  }

  /* Forms */
  form{
    width: 100%;
    margin: 0;
  }

  input, textarea, select, button{
    font-size: 16px;
  }

  /* Tables */
  table{
    font-size: 13px;
  }

  table th, table td{
    padding: 6px;
  }

  /* Admin dashboard */
  #analytics{
    flex-direction: column;
  }

  /* Footer */
  footer{
    padding: 20px 10px;
  }
}

@media (max-width: 480px){
  /* Navbar buttons full width */
  nav button{
    flex: 1 1 100%;
  }

  /* Hero spacing */
  .hero-content{
    padding: 20px;
  }

  .tagline{
    font-size: 14px;
  }
}
</style>
</head>

<body>

<header>
  <div class="logo">
    <h2 data-i18n="home_title">‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ö‡•á‡§§‡§®‡§æ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä</h2>
    <span>Citizen Alert & Incident Portal</span>
  </div>
</header>

<nav style="background:#dcfce7;padding:10px 20px;display:flex;justify-content:center;gap:15px;flex-wrap:wrap">
  <button onclick="showSection('home')" data-i18n="nav_home">Home</button>
  <button onclick="showSection('report')" data-i18n="nav_report">‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
  <button onclick="showSection('track')" data-i18n="nav_track">‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï</button>
  <button onclick="showSection('admin')" data-i18n="nav_authority">Authority Login</button>
  <button onclick="toggleLang()" class="lang-btn" data-i18n="nav_lang">EN / ‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
</nav>

<section id="home" class="section active home-hero">
  <div class="hero-content container">
    <h1 data-i18n="home_title">‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ö‡•á‡§§‡§®‡§æ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä</h1>
    <p class="tagline" data-i18n="home_tagline">
      Government of India Initiative for Public Safety & Civic Responsibility
    </p>
    <div class="hero-actions">
      <button class="primary" onclick="showSection('report')" data-i18n="btn_report">üì¢ Report an Issue</button>
      <button class="secondary" onclick="showSection('track')" data-i18n="btn_track">üìç Track Complaint</button>
    </div>
    <div class="gov-note">
      An official citizen engagement platform to report public issues,
      ensure transparency, and improve governance.
    </div>
  </div>
</section>

<section id="mainContent" class="section active">
  <div class="container" style="display:grid;grid-template-columns:3fr 1fr;gap:30px">
    <div>
      <div class="rules-box" id="citizenRankBox">
        <h3>üèÖ Your Civic Rank</h3>
        <p id="citizenRankText">No rank yet</p>
      </div>
      <!-- Government Notice Board -->
      <div class="notice-board">
        <h3 data-i18n="notice_title">üì¢ Public Notices</h3>
        <ul>
          <li data-i18n="notice_1">Do not submit fake or misleading complaints.</li>
          <li data-i18n="notice_2">Emergency complaints will be prioritized.</li>
          <li data-i18n="notice_3">False reporting may lead to legal action.</li>
        </ul>
      </div>
      <!-- Rules & Regulations Section -->
      <div class="rules-box">
        <h3 data-i18n="rules_title">üìú Rules & Regulations</h3>
        <ol>
          <li data-i18n="rule_1">Provide correct information while submitting complaints.</li>
          <li data-i18n="rule_2">Attach valid photo evidence if available.</li>
          <li data-i18n="rule_3">Use this portal only for public interest issues.</li>
          <li data-i18n="rule_4">Complaints are monitored by authorized departments.</li>
          <li data-i18n="rule_5">False or misleading complaints may attract fines as per applicable laws.</li>
          <li data-i18n="rule_6">A fine of ‚Çπ500‚Äì‚Çπ2000 may be imposed after verification by the concerned authority.</li>
          <li data-i18n="rule_7">Fines are imposed only when a complaint is proven fake, repeated, or intentionally misleading.</li>
        </ol>
      </div>
      <!-- Civic Sense Fine Dashboard -->
      <div class="rules-box">
        <h3 data-i18n="fine_title">üí∞ Civic Sense Fine Dashboard</h3>
        <table style="width:100%;border-collapse:collapse;font-size:14px">
          <thead>
            <tr style="background:rgba(255,255,255,0.2)">
              <th style="padding:8px;text-align:left" data-i18n="fine_issue">Issue</th>
              <th style="padding:8px;text-align:left" data-i18n="fine_amount">Fine Amount</th>
              <th style="padding:8px;text-align:left" data-i18n="fine_when">When Imposed</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-i18n="fine_littering">Littering / Garbage</td>
              <td>‚Çπ500 ‚Äì ‚Çπ1000</td>
              <td data-i18n="fine_littering_when">If garbage is thrown in public places</td>
            </tr>
            <tr>
              <td data-i18n="fine_spitting">Spitting in Public</td>
              <td>‚Çπ500</td>
              <td data-i18n="fine_spitting_when">Spitting at public places</td>
            </tr>
            <tr>
              <td data-i18n="fine_noise">Noise Pollution</td>
              <td>‚Çπ1000 ‚Äì ‚Çπ2000</td>
              <td data-i18n="fine_noise_when">Excessive noise beyond permitted limits</td>
            </tr>
            <tr>
              <td data-i18n="fine_damage">Damage to Public Property</td>
              <td>‚Çπ2000+</td>
              <td data-i18n="fine_damage_when">Damaging government or public property</td>
            </tr>
            <tr>
              <td data-i18n="fine_other">Other Civic Sense Issue</td>
              <td>‚Çπ500 ‚Äì ‚Çπ2000</td>
              <td data-i18n="fine_other_when">Any verified civic indiscipline</td>
            </tr>
          </tbody>
        </table>
        <p style="font-size:12px;margin-top:10px;opacity:.8" data-i18n="fine_note">
          * Fine amounts are indicative and may vary as per local municipal laws.
        </p>
      </div>
      <!-- Emergency Contact Section -->
      <div class="rules-box">
        <h3>üö® Emergency Contact</h3>
        <ul>
          <li><b>Police:</b> 112</li>
          <li><b>Ambulance:</b> 108</li>
          <li><b>Fire Brigade:</b> 101</li>
          <li><b>Women Helpline:</b> 181</li>
          <li><b>Municipal Control Room:</b> 155304</li>
        </ul>
      </div>
      <!-- Authority Description -->
      <div class="rules-box">
        <h3>üèõÔ∏è About Authorities</h3>
        <p>
          Complaints submitted on this portal are monitored and handled by authorized
          government departments such as Municipal Corporation, Police Department,
          Public Works Department (PWD), Electricity Department, and Water Supply Department.
        </p>
        <p>
          Each complaint is verified and processed as per applicable civic laws and
          administrative guidelines to ensure transparency, accountability, and public safety.
        </p>
      </div>
      <!-- Site Conclusion -->
      <div class="rules-box">
        <h3>‚úÖ Site Conclusion</h3>
        <p>
          ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ö‡•á‡§§‡§®‡§æ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä is a citizen-centric digital platform designed to
          promote civic responsibility, encourage public participation, and support
          smart governance through technology.
        </p>
        <p>
          By reporting civic issues responsibly, citizens contribute directly to cleaner,
          safer, and more accountable cities.
        </p>
      </div>
    </div>
    <aside>
      <div class="rules-box">
        <h3>‚ÑπÔ∏è Quick Info</h3>
        <ul>
          <li>Report civic issues responsibly</li>
          <li>Use real photos only</li>
          <li>Emergency cases get priority</li>
        </ul>
      </div>
    </aside>
  </div>
</section>

<section id="report" class="section">
  <div class="container">
  <h2 data-i18n="report_title">‡§ò‡§ü‡§®‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h2>
  <form id="reportForm">
    <label data-i18n="label_type">‡§ò‡§ü‡§®‡§æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
    <select id="issueType" required onchange="updateFineEstimate()">
      <option value="">‡§ö‡•Å‡§®‡•á‡§Ç</option>
      <option value="issue_littering" data-i18n="issue_littering">Littering / Garbage</option>
      <option value="issue_spitting" data-i18n="issue_spitting">Spitting in Public</option>
      <option value="issue_noise" data-i18n="issue_noise">Noise Pollution</option>
      <option value="issue_damage" data-i18n="issue_damage">Damage to Public Property</option>
      <option value="issue_other_civic" data-i18n="issue_other_civic">Other Civic Sense Issue</option>
    </select>
    <p id="fineEstimate" style="margin-top:8px;font-weight:600;color:#065f46"></p>

    <label data-i18n="label_desc">‡§ò‡§ü‡§®‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£</label>
    <textarea required></textarea>

    <label data-i18n="label_photo">‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</label>
    <input 
      type="file" 
      id="issuePhoto" 
      accept="image/*"
      capture="environment"
    >
    <small style="opacity:.75">
      üì∑ On mobile devices, camera capture is enforced for authenticity
    </small>
    <p id="aiDetectMsg" style="font-size:13px;color:#065f46;margin-top:6px"></p>

    <label data-i18n="label_location">‡§∏‡•ç‡§•‡§æ‡§®</label>
<input type="text" id="locationInput" placeholder="Auto-detected address" data-i18n-placeholder="placeholder_address" required onclick="fetchCurrentLocation()">
    <input type="hidden" id="lat">
    <input type="hidden" id="lng">

    <label style="display:flex;align-items:center;gap:8px;font-weight:normal">
      <input type="checkbox" id="anonymousCheck">
      <span data-i18n="anon_label">Submit complaint anonymously</span>
    </label>
    <label data-i18n="label_name">‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ</label>
    <input type="text" id="userName" required>

    <label data-i18n="label_mobile">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
    <input type="tel" id="userMobile" pattern="[0-9]{10}" required>

    <button class="primary" type="submit" data-i18n="btn_submit">‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
  </form>
  <p id="successMsg"></p>
  <p id="duplicateWarn" style="color:#b45309;font-weight:600;margin-top:10px"></p>
  </div>
</section>

<section id="track" class="section">
  <div class="container">
  <h2 data-i18n="track_title">‡§Ö‡§™‡§®‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç</h2>
  <input type="text" id="trackId" placeholder="CAP-XXXXX" data-i18n-placeholder="placeholder_track">
  <br><br>
  <button class="primary" onclick="trackReport()" data-i18n="btn_search">‡§ñ‡•ã‡§ú‡•á‡§Ç</button>
  <div id="trackResult"></div>
  </div>
</section>

<section id="admin" class="section">
  <div class="container">
  <h2 data-i18n="authority_title">üõ†Ô∏è Authority Login Panel</h2>

  <div id="adminLogin">
    <select id="adminDept">
      <option value="">Select Department</option>
      <option value="Police">Police</option>
      <option value="PWD">PWD</option>
      <option value="Electricity">Electricity</option>
      <option value="Water">Water</option>
      <option value="Municipal">Municipal</option>
    </select>
    <br><br>
    <input type="email" id="adminEmail" placeholder="Enter Authority Email" required>
    <br><br>
    <input type="password" id="adminPass" placeholder="Enter Authority Password">
    <br><br>
    <button class="primary" onclick="adminLogin()" data-i18n="btn_login">Login</button>
    <p id="adminError" style="color:red"></p>
  </div>

  <div id="adminDashboard" style="display:none">
    
    <div id="analytics" style="display:flex;gap:15px;flex-wrap:wrap;margin-bottom:20px">
      <div class="card" id="totalCount">Total: 0</div>
      <div class="card" id="submittedCount">Submitted: 0</div>
      <div class="card" id="progressCount">In Progress: 0</div>
      <div class="card" id="resolvedCount">Resolved: 0</div>
      <div class="card" id="emergencyCount">Emergency: 0</div>
    </div>
    <div id="complaintList"></div>
    <div style="text-align:center;margin-top:30px">
      <button class="primary" onclick="adminLogout()" data-i18n="btn_logout">Logout</button>
    </div>
  </div>
  </div>
</section>

<section style="background:#16a34a;color:white;padding:50px 20px;text-align:center">
  <h2>üì¢ Be a Responsible Citizen</h2>
  <p>Report civic issues and help build a cleaner, safer nation.</p>
  <button class="primary" onclick="showSection('report')">Report Now</button>
</section>

<footer>
  <p data-i18n="footer_text">¬© 2026 Citizen Alert Portal | Digital India</p>
</footer>

<script>
/* ===============================
   AI FINE ESTIMATOR (DEMO)
   =============================== */

const fineMap = {
  issue_littering: "‚Çπ500 ‚Äì ‚Çπ1000",
  issue_spitting: "‚Çπ500",
  issue_noise: "‚Çπ1000 ‚Äì ‚Çπ2000",
  issue_damage: "‚Çπ2000+",
  issue_other_civic: "‚Çπ500 ‚Äì ‚Çπ2000"
};

function updateFineEstimate(){
  const issue = document.getElementById("issueType").value;
  const box = document.getElementById("fineEstimate");

  if(!issue){
    box.innerHTML = "";
    return;
  }

  const amount = fineMap[issue] || "As per rules";

  box.innerHTML =
    "üí∞ Estimated Fine: <b>"+amount+"</b> <br><small>(For awareness purpose only)</small>";
}

/* ===============================
   AI AUTO ISSUE DETECTION (DEMO)
   =============================== */

// ==========================
// MOBILE CAMERA ENFORCEMENT
// ==========================
function isMobileDevice(){
  return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

document.getElementById("issuePhoto").addEventListener("change", function(){
  const file = this.files[0];
  if(!file) return;

  // Enforce camera-only on mobile
  if(isMobileDevice()){
    if(!file.type.startsWith("image/")){
      alert("Please capture photo using mobile camera only.");
      this.value = "";
      return;
    }
  }
  // Optional: Warn on desktop
  if(!isMobileDevice()){
    console.warn("Camera enforcement active only on mobile devices");
  }

  const name = file.name.toLowerCase();
  const issueSelect = document.getElementById("issueType");
  const msg = document.getElementById("aiDetectMsg");

  // Fake AI logic (Explainable & Demo-perfect)
  let detected = "";

  if(name.includes("garbage") || name.includes("trash")){
    detected = "issue_littering";
  }
  else if(name.includes("spit")){
    detected = "issue_spitting";
  }
  else if(name.includes("noise")){
    detected = "issue_noise";
  }
  else if(name.includes("break") || name.includes("damage")){
    detected = "issue_damage";
  }
  else{
    detected = "issue_other_civic";
  }

  // Apply detection
  [...issueSelect.options].forEach(opt=>{
    if(opt.getAttribute("data-i18n") === detected){
      opt.selected = true;
      updateFineEstimate();
    }
  });

  // Show AI message
  const labelMap = {
    issue_littering: "Littering / Garbage",
    issue_spitting: "Spitting in Public",
    issue_noise: "Noise Pollution",
    issue_damage: "Damage to Public Property",
    issue_other_civic: "Other Civic Sense Issue"
  };

  msg.innerHTML = "ü§ñ AI detected issue: <b>" + labelMap[detected] + "</b>";
});
const firebaseConfig = {
  apiKey: "demo",
  authDomain: "demo.firebaseapp.com",
  databaseURL: "https://demo.firebaseio.com",
  projectId: "demo",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  const target = document.getElementById(id);
  target.classList.add('active');
  target.scrollIntoView({ behavior: 'smooth', block: 'start' });

  if(id === "report"){
    fetchCurrentLocation();
  }
}

async function fetchCurrentLocation(){
  const locationField = document.getElementById("locationInput");
  const latField = document.getElementById("lat");
  const lngField = document.getElementById("lng");

  locationField.value = "Fetching current location‚Ä¶";
  latField.value = "";
  lngField.value = "";

  if(!navigator.geolocation){
    locationField.value = "Geolocation not supported";
    return;
  }

  navigator.geolocation.getCurrentPosition(
    async pos => {
      const lat = pos.coords.latitude.toFixed(6);
      const lng = pos.coords.longitude.toFixed(6);

      latField.value = lat;
      lngField.value = lng;

      try{
        const res = await fetch(
          `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`
        );
        const data = await res.json();

        const addr = data.address || {};
        const fullAddress = [
          addr.road,
          addr.suburb || addr.neighbourhood,
          addr.city || addr.town || addr.village,
          addr.state,
          addr.postcode
        ].filter(Boolean).join(", ");

        locationField.value = fullAddress || "Address not found";
      }catch(e){
        locationField.value = "Unable to fetch address";
      }
    },
    () => {
      locationField.value = "Location permission denied";
    },
    { enableHighAccuracy:true, maximumAge:0 }
  );
}

/* ===============================
   ANONYMOUS COMPLAINT MODE
   =============================== */

document.getElementById("anonymousCheck").addEventListener("change", function(){
  const name = document.getElementById("userName");
  const mobile = document.getElementById("userMobile");

  if(this.checked){
    name.value = "";
    mobile.value = "";
    name.disabled = true;
    mobile.disabled = true;
    name.required = false;
    mobile.required = false;
  }else{
    name.disabled = false;
    mobile.disabled = false;
    name.required = true;
    mobile.required = true;
  }
});

document.getElementById("reportForm").addEventListener("submit",function(e){
  e.preventDefault();
  const fileInput = this.querySelector('input[type="file"]');
  let imageData = "";
  if(fileInput.files.length > 0){
    const reader = new FileReader();
    reader.onload = () => {
      imageData = reader.result;
      saveReport(imageData);
    };
    reader.readAsDataURL(fileInput.files[0]);
    return;
  }
  saveReport("");
});

/* ===============================
   CITIZEN RANK SYSTEM
   =============================== */

function getCitizenRank(count){
  if(count >= 25) return "ü¶∏ Civic Hero";
  if(count >= 15) return "ü•á Gold Citizen";
  if(count >= 8)  return "ü•à Silver Citizen";
  if(count >= 3)  return "ü•â Bronze Citizen";
  return "New Citizen";
}

function updateCitizenRank(){
  let validCount = 0;

  for(let i=0;i<localStorage.length;i++){
    const key = localStorage.key(i);
    if(key.startsWith("CAP-")){
      validCount++;
    }
  }

  const rank = getCitizenRank(validCount);
  const box = document.getElementById("citizenRankText");
  if(box){
    box.innerHTML = `You have submitted <b>${validCount}</b> valid complaints.<br>Rank: <b>${rank}</b>`;
  }
}

function saveReport(imageData){
  const issueType = document.getElementById("issueType").value;
  const lat = document.getElementById("lat").value;
  const lng = document.getElementById("lng").value;

  let isDuplicate = false;

  // Simple AI duplicate detection (Explainable)
  for(let i=0;i<localStorage.length;i++){
    const key = localStorage.key(i);
    if(!key.startsWith("CAP-")) continue;

    const old = JSON.parse(localStorage.getItem(key));
    if(
      old.lat === lat &&
      old.lng === lng &&
      old.issueType === issueType
    ){
      isDuplicate = true;
      break;
    }
  }

  const warnBox = document.getElementById("duplicateWarn");
  if(isDuplicate){
    warnBox.innerHTML = "‚ö† Similar complaint already exists for this location. Please avoid duplicate reporting.";
  }else{
    warnBox.innerHTML = "";
  }

  let ref = "CAP-"+Math.random().toString(36).substr(2,5).toUpperCase();

  let report = {
    ref,
    issueType,
    status:"Submitted",
    department:"Municipal",
    priority:"Normal",
    image:imageData,
    time:new Date().toLocaleString(),
    lat,
    lng,
    anonymous: document.getElementById("anonymousCheck").checked
  };

  localStorage.setItem(ref, JSON.stringify(report));
  db.ref("complaints/"+ref).set(report);

  document.getElementById("successMsg").innerHTML =
    "‚úÖ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§´‡§≤! Reference ID: <b>"+ref+"</b>";

  document.getElementById("reportForm").reset();
  updateCitizenRank();
}

function trackReport(){
  let id = document.getElementById("trackId").value;
  let data = localStorage.getItem(id);
  if(!data){
    document.getElementById("trackResult").innerHTML = "‚ùå ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä";
    return;
  }
  let report = JSON.parse(data);
  document.getElementById("trackResult").innerHTML = `
    <div class="status-wrapper">
      <p><b>üìå Current Status:</b> ${report.status}</p>

      <div class="status-steps">
        <div class="status-step ${report.status === "Submitted" ? "active" : ""}">1</div>
        <div class="status-step ${report.status === "In Progress" || report.status === "Resolved" ? "active" : ""}">2</div>
        <div class="status-step ${report.status === "Resolved" ? "active" : ""}">3</div>
      </div>

      <div class="status-labels">
        <span>Submitted</span>
        <span>In Progress</span>
        <span>Resolved</span>
      </div>

      <p style="margin-top:12px">üïí <b>Reported At:</b> ${report.time}</p>
    </div>
  `;
}

const ADMIN_PASSWORD = "admin123";
let loggedDept = "";

function adminLogin(){
  const pass = document.getElementById("adminPass").value;
  const dept = document.getElementById("adminDept").value;
  const email = document.getElementById("adminEmail").value;

  if(!dept){
    document.getElementById("adminError").innerText="Select department";
    return;
  }

  if(!email){
    document.getElementById("adminError").innerText="Enter authority email";
    return;
  }

  if(pass !== ADMIN_PASSWORD){
    document.getElementById("adminError").innerText="Invalid password";
    return;
  }

  loggedDept = dept;
  document.getElementById("adminLogin").style.display="none";
  document.getElementById("adminDashboard").style.display="block";
  loadComplaints();
}

function loadComplaints(){
  let total=0, submitted=0, progress=0, resolved=0, emergency=0;

  const container = document.getElementById("complaintList");
  container.innerHTML = "";

  if(localStorage.length === 0){
    container.innerHTML = "<p>No complaints found</p>";
    return;
  }

  for(let i=0;i<localStorage.length;i++){
    const key = localStorage.key(i);
    if(!key.startsWith("CAP-")) continue;

    const data = JSON.parse(localStorage.getItem(key));
    if(loggedDept !== "Municipal" && data.department !== loggedDept) continue;

    total++;
    if(data.status==="Submitted") submitted++;
    if(data.status==="In Progress") progress++;
    if(data.status==="Resolved") resolved++;
    if(data.priority==="Emergency") emergency++;

    const div = document.createElement("div");
    div.style.border = "1px solid #ccc";
    div.style.padding = "14px";
    div.style.margin = "10px 0";

    if(data.priority==="High") div.style.borderLeft="6px solid orange";
    if(data.priority==="Emergency") div.style.borderLeft="6px solid red";
    if(data.priority==="Normal") div.style.borderLeft="6px solid green";

    div.innerHTML = `
      ${data.image ? `<img src="${data.image}" style="max-width:100%;height:120px;object-fit:cover;border-radius:6px;margin-bottom:8px">` : ""}
      ${data.lat ? `<a target="_blank" href="https://www.google.com/maps?q=${data.lat},${data.lng}">üìç View Location</a><br><br>` : ""}
      <b>Reference:</b> ${data.ref}<br>
      <b>Reported By:</b> ${data.anonymous ? "Anonymous Citizen" : "Registered Citizen"}<br>

      <b>Department:</b>
      <select onchange="updateDepartment('${data.ref}', this.value)">
        <option ${data.department==="Police"?"selected":""}>Police</option>
        <option ${data.department==="PWD"?"selected":""}>PWD</option>
        <option ${data.department==="Electricity"?"selected":""}>Electricity</option>
        <option ${data.department==="Water"?"selected":""}>Water</option>
        <option ${data.department==="Municipal"?"selected":""}>Municipal</option>
      </select>
      <br><br>

      <b>Priority:</b>
      <select onchange="updatePriority('${data.ref}', this.value)">
        <option ${data.priority==="Normal"?"selected":""}>Normal</option>
        <option ${data.priority==="High"?"selected":""}>High</option>
        <option ${data.priority==="Emergency"?"selected":""}>Emergency</option>
      </select>
      <br><br>

      <b>Status:</b>
      <select onchange="updateStatus('${data.ref}', this.value)">
        <option ${data.status==="Submitted"?"selected":""}>Submitted</option>
        <option ${data.status==="In Progress"?"selected":""}>In Progress</option>
        <option ${data.status==="Resolved"?"selected":""}>Resolved</option>
      </select>
      <br>
      <small>${data.time}</small>
    `;

    container.appendChild(div);
  }
  document.getElementById("totalCount").innerText = "Total: " + total;
  document.getElementById("submittedCount").innerText = "Submitted: " + submitted;
  document.getElementById("progressCount").innerText = "In Progress: " + progress;
  document.getElementById("resolvedCount").innerText = "Resolved: " + resolved;
  document.getElementById("emergencyCount").innerText = "Emergency: " + emergency;
}

function updateStatus(ref, newStatus){
  const report = JSON.parse(localStorage.getItem(ref));
  report.status = newStatus;
  localStorage.setItem(ref, JSON.stringify(report));
  alert("Status updated");
}

function updateDepartment(ref, department){
  const report = JSON.parse(localStorage.getItem(ref));
  report.department = department;
  localStorage.setItem(ref, JSON.stringify(report));
  alert("Department assigned to " + department);
}

/* =========================
   LANGUAGE TRANSLATION FIX
   ========================= */

const translations = {
  hi: {
    anon_label: "‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
    fine_title: "üí∞ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
    fine_issue: "‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ",
    fine_amount: "‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§∞‡§æ‡§∂‡§ø",
    fine_when: "‡§ï‡§¨ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ",

    fine_littering: "‡§ï‡§ö‡§∞‡§æ ‡§´‡•à‡§≤‡§æ‡§®‡§æ",
    fine_littering_when: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§ï‡§ö‡§∞‡§æ ‡§´‡•á‡§Ç‡§ï‡§®‡•á ‡§™‡§∞",

    fine_spitting: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§∞ ‡§•‡•Ç‡§ï‡§®‡§æ",
    fine_spitting_when: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§∞ ‡§•‡•Ç‡§ï‡§®‡•á ‡§™‡§∞",

    fine_noise: "‡§ß‡•ç‡§µ‡§®‡§ø ‡§™‡•ç‡§∞‡§¶‡•Ç‡§∑‡§£",
    fine_noise_when: "‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§∂‡•ã‡§∞ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞",

    fine_damage: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§®",
    fine_damage_when: "‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡§æ ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§™‡§π‡•Å‡§Ç‡§ö‡§æ‡§®‡•á ‡§™‡§∞",

    fine_other: "‡§Ö‡§®‡•ç‡§Ø ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ",
    fine_other_when: "‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§â‡§≤‡•ç‡§≤‡§Ç‡§ò‡§® ‡§™‡§∞",

    fine_note: "* ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§∞‡§æ‡§∂‡§ø ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§®‡§ó‡§∞ ‡§®‡§ø‡§ï‡§æ‡§Ø ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§≠‡§ø‡§®‡•ç‡§® ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§",
    nav_home: "‡§π‡•ã‡§Æ",
    nav_report: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç",
    nav_track: "‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§ö‡•á‡§ï",
    nav_authority: "‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•â‡§ó‡§ø‡§®",
    nav_lang: "EN / ‡§π‡§ø‡§Ç‡§¶‡•Ä",

    home_title: "‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ö‡•á‡§§‡§®‡§æ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä",
    home_tagline: "‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§π‡•á‡§§‡•Å ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§™‡§π‡§≤",

    btn_report: "üì¢ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç",
    btn_track: "üìç ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç",

    report_title: "‡§ò‡§ü‡§®‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç",
    track_title: "‡§Ö‡§™‡§®‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç",
    authority_title: "üõ†Ô∏è ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® ‡§™‡•à‡§®‡§≤",

    label_type: "‡§ò‡§ü‡§®‡§æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",
    label_desc: "‡§ò‡§ü‡§®‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£",
    label_photo: "‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
    label_location: "‡§∏‡•ç‡§•‡§æ‡§®",
    label_name: "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ",
    label_mobile: "‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞",

    btn_submit: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç",
    btn_search: "‡§ñ‡•ã‡§ú‡•á‡§Ç",
    btn_login: "‡§≤‡•â‡§ó‡§ø‡§®",
    btn_logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",

    footer_text: "¬© 2026 ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞ ¬∑ ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤",

    placeholder_address: "‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ",
    placeholder_track: "‡§∞‡•á‡§´‡§∞‡•á‡§Ç‡§∏ ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",

    // Added translations for notice, rules, quick, and issue types
    notice_title: "üì¢ ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Å",
    notice_1: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§∞‡•ç‡§ú‡•Ä ‡§Ø‡§æ ‡§≠‡•ç‡§∞‡§æ‡§Æ‡§ï ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§",
    notice_2: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§¶‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§",
    notice_3: "‡§ó‡§≤‡§§ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§™‡§∞ ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§",

    rules_title: "üìú ‡§®‡§ø‡§Ø‡§Æ ‡§è‡§µ‡§Ç ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç",
    rule_1: "‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡§π‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§Ç‡•§",
    rule_2: "‡§Ø‡§¶‡§ø ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•ã ‡§§‡•ã ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§ï ‡§´‡•ã‡§ü‡•ã ‡§∏‡§Ç‡§≤‡§ó‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç‡•§",
    rule_3: "‡§á‡§∏ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§π‡§ø‡§§ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§∞‡•á‡§Ç‡•§",
    rule_4: "‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•ã‡§Ç ‡§ï‡•Ä ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡•É‡§§ ‡§µ‡§ø‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§",
    rule_5: "‡§´‡§∞‡•ç‡§ú‡•Ä ‡§Ø‡§æ ‡§≠‡•ç‡§∞‡§æ‡§Æ‡§ï ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•ã‡§Ç ‡§™‡§∞ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§æ‡§®‡•Ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
    rule_6: "‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§ß‡§ø‡§ï‡§∞‡§£ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•á ‡§¨‡§æ‡§¶ ‚Çπ500 ‡§∏‡•á ‚Çπ2000 ‡§§‡§ï ‡§ï‡§æ ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
    rule_7: "‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§ï‡•á‡§µ‡§≤ ‡§§‡§≠‡•Ä ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§´‡§∞‡•ç‡§ú‡•Ä, ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§Ø‡§æ ‡§ú‡§æ‡§®‡§¨‡•Ç‡§ù‡§ï‡§∞ ‡§≠‡•ç‡§∞‡§æ‡§Æ‡§ï ‡§™‡§æ‡§à ‡§ú‡§æ‡§è‡•§",

    quick_title: "‚ö° ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
    quick_btn: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Å",

    issue_select: "‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",
    issue_road: "‡§∏‡§°‡§º‡§ï",
    issue_water: "‡§™‡§æ‡§®‡•Ä",
    issue_electricity: "‡§¨‡§ø‡§ú‡§≤‡•Ä",
    issue_crime: "‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§â‡§≤‡•ç‡§≤‡§Ç‡§ò‡§®",
    issue_littering: "‡§ï‡§ö‡§∞‡§æ ‡§´‡•à‡§≤‡§æ‡§®‡§æ",
    issue_spitting: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§∞ ‡§•‡•Ç‡§ï‡§®‡§æ",
    issue_noise: "‡§ß‡•ç‡§µ‡§®‡§ø ‡§™‡•ç‡§∞‡§¶‡•Ç‡§∑‡§£",
    issue_damage: "‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§®",
    issue_other_civic: "‡§Ö‡§®‡•ç‡§Ø ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ",
  },

  en: {
    nav_home: "Home",
    nav_report: "Report",
    nav_track: "Track Status",
    nav_authority: "Authority Login",
    nav_lang: "EN / ‡§π‡§ø‡§Ç‡§¶‡•Ä",

    home_title: "Citizen Awareness & Responsibility",
    home_tagline: "Government of India Initiative for Public Safety & Civic Responsibility",

    btn_report: "üì¢ Report an Issue",
    btn_track: "üìç Track Complaint",

    report_title: "Report an Issue",
    track_title: "Track Your Complaint",
    authority_title: "üõ†Ô∏è Authority Login Panel",

    label_type: "Issue Type",
    label_desc: "Issue Description",
    label_photo: "Upload Photo",
    label_location: "Location",
    label_name: "Your Name",
    label_mobile: "Mobile Number",

    btn_submit: "Submit Report",
    btn_search: "Search",
    btn_login: "Login",
    btn_logout: "Logout",

    footer_text: "¬© 2026 Government of India ¬∑ Citizen Alert Portal",

    placeholder_address: "Full Address",
    placeholder_track: "Enter Reference ID",

    // Added translations for notice, rules, quick, and issue types
    notice_title: "üì¢ Public Notices",
    notice_1: "Do not submit fake or misleading complaints.",
    notice_2: "Emergency complaints will be prioritized.",
    notice_3: "False reporting may lead to legal action.",

    rules_title: "üìú Rules & Regulations",
    rule_1: "Provide correct information while submitting complaints.",
    rule_2: "Attach valid photo evidence if available.",
    rule_3: "Use this portal only for public interest issues.",
    rule_4: "Complaints are monitored by authorized departments.",
    rule_5: "False or misleading complaints may attract fines as per applicable laws.",
    rule_6: "A fine ranging from ‚Çπ500 to ‚Çπ2000 may be imposed after verification by the concerned authority.",
    rule_7: "Fines are imposed only if a complaint is found to be fake, repeated, or intentionally misleading.",

    quick_title: "‚ö° Quick Complaint Report",
    quick_btn: "Continue to Full Form",

    issue_select: "Select Issue Type",
    issue_road: "Road",
    issue_water: "Water",
    issue_electricity: "Electricity",
    issue_crime: "Civic Sense Violation",
    issue_littering: "Littering / Garbage",
    issue_spitting: "Spitting in Public",
    issue_noise: "Noise Pollution",
    issue_damage: "Damage to Public Property",
    issue_other_civic: "Other Civic Sense Issue",
  }
};

let currentLang = "hi";

function setLanguage(lang){
  currentLang = lang;

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if(translations[lang][key]){
      el.textContent = translations[lang][key];
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
    const key = el.getAttribute("data-i18n-placeholder");
    if(translations[lang][key]){
      el.placeholder = translations[lang][key];
    }
  });
}

function toggleLang(){
  setLanguage(currentLang === "hi" ? "en" : "hi");
}

/* set default language */
setLanguage("hi");
updateCitizenRank();

</script>

<script>
function adminLogout(){
  loggedDept = "";
  document.getElementById("adminPass").value = "";
  document.getElementById("adminDept").value = "";
  document.getElementById("adminEmail").value = "";
  document.getElementById("adminDashboard").style.display = "none";
  document.getElementById("adminLogin").style.display = "block";
  showSection('home');
}
</script>

</body>
</html>
